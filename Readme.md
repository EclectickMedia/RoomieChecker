# Description

Uses `nmap` to scan a given IP range and provides information about "registered users."

By default uses range `nmap -sP 192.168.1.0/24` to generate a list of connected devices. Recommended identifiers are device `hostname`s.

Assumes [some logic][pdf] when searching for connected users to ensure that mobile devices are on active sessions.

All user details are accessed from a file named `db.pkl` which is usually generated by `register.py` (see `register.py -h`). 

# Basic Usage:

To run the software from the command line, first register a user to the db:

```bash
python3 register.py "Ariana Giroux" "Arianas Identifier"
```
> Note, this is not the only way to generate more users/db's this is just the easiest.

Then we can proceed with running the software:

```bash
python3 main.py
```

> To specify your IP range, make sure to specify the `--ip_range` argument.


# Installation:

The script has an easy to use installation script already provided at `install.sh`. This script should run on any system that can use the `apt-get` package manager. 

To run copy and paste the following line into your terminal emulator:

`curl https://raw.githubusercontent.com/EclectickMedia/UserChecker/install.sh | bash`

# Manual Installation

Clone this repository:

`git clone https://github.com/EclectickMedia/UserChecker.git`

Ensure that you have NMAP installed. See [their instructions][nmap install] for more information.

We must also ensure that the logs folder is created within the script directory. 
> i.e `mkdir logs`

# Advanced Usage:

From `main.py`:

```
usage: main.py [-h] [-d DELAY] [-q] [-r IPRANGE] [-R]

optional arguments:
  -h, --help            show this help message and exit
  -d DELAY, --delay DELAY
                        The amount of time (in seconds) to delay between each
                        NMAP scan. Defaults to 0 (instant)
  -q, --quiet           Do not output to STDOUT
  -r IPRANGE, --iprange IPRANGE
                        The IP range to attempt to scan. Defaults to
                        '192.168.1.0/24'
  -R, --reset           Reset the on line status of the users in the database

```

From `register.py`:

```
usage: 
    This script registers new users to the database object. See
    docs/developers/Database.md for object details. 
       [-h] name ident

positional arguments:
  name        The name of the maker
  ident       The maker's network identifier

optional arguments:
  -h, --help  show this help message and exit
```

[pdf]: "./UserChecker - Confirmation Policies.pdf"
[nmap install]: https://nmap.org/download.html
